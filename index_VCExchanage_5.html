<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>

/*------*/
/* Grid */
/*------*/
  
.wrapper {
    display: grid;
    grid-gap: 0px;
    grid-template-rows: 8em 28em 20em;
    grid-template-columns: repeat(auto-fill, 20em);
}

@font-face {
    font-family: educaSansRegular;
    src: url(Educa_Sans_Webfonts/EducaSans-Regular.woff2);
}

/*---------------*/
/* Text in Boxes */
/*---------------*/

.textIssuer, .textHolder, .textBlockchain, .textVerifier, .labelNumber {
    font-size: 12pt;
    font-family: educaSansRegular, Arial, sans-serif;
    fill:  #2c4262;
}


.sliderLabels { 
    font-size: 10pt;
    font-family: educaSansRegular, Arial, sans-serif;
    fill:  #2c4262;
    margin-left: 10px;
    margin-top: 40px;
    margin-bottom: 10px;
}

#valuesSlider {
    font-size: 10pt;
    font-family: educaSansRegular, Arial, sans-serif;
    fill:  #2c4262;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    writing-mode: horizontal-lr;
    width: 560px;
    margin-bottom: 10px;
    padding-bottom: 20px;
    margin-left: 20px;
    margin-top:40px;
}


.textIssuer, .textHolder, .textBlockchain, .textVerifier {
    text-anchor: middle;
}

.tooltip {
    font-size: 11pt;
    font-family: educaSansRegular, Arial, sans-serif;
}

#vcTooltip {
    grid-column: 1/3;
    grid-row: 3/-1;
}

/*------------------*/
/* Formating Slider */
/*------------------*/ 

/*Appearance of slider band */
#vcProcessSlider {
  position: absolute;
 -webkit-appearance: none;
  appearance: none;
  width: 570px;
  height: 15px;
  background: rgba(204,196,194,0.5);
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
  border-radius: 0px;
  border: none;
  margin-left: 10px;
  margin-top: 30px;  
  grid-row: 1/1;
  grid-column: 1/-1;
  }


/*Appearance of slider item*/
#vcProcessSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: rgba(82,156,154,0.8);
  cursor: pointer;
  border: none;
  border-radius: 0px
}

/*Appearance of slider item in Firefox*/
#vcProcessSlider::-moz-range-thumb {
  -webkit-appearance: none;
  width: 28px;
  height: 18px;
  background: rgba(82,156,154,0.8);
  cursor: pointer;
  border: none;
  border-radius: 0px
}


/*Appeareance when hovering over the slider*/
#vcProcessSlider:hover {
  opacity: 1;
}

#canvas {
    grid-row: 2/-1;
    grid-column: 1/-1;
}



</style>

</head>

<script src="https://d3js.org/d3.v6.min.js"></script>

<body>
    <div class="wrapper">
        <div class="slider_row" rowspan = "5">
            <input type="range" name="vcProcessSlider" id=vcProcessSlider list="valuesSlider" max=11 step="1" onchange="updateStep()">
            <label for="vcProcessSlider" class="sliderLabels">Schritte zur Vergabe eines digitalen Nachweises</label>
            <datalist id="valuesSlider">
                <option value="0" label="0"></option>
                <option value="1" label= "1"></option>
                <option value="2" label= "2"></option>
                <option value="3" label= "3"></option>
                <option value="4" label= "4"></option>
                <option value="5" label= "5"></option>
                <option value="6" label= "6"></option>
                <option value="7" label= "7"></option>
                <option value="8" label= "8"></option>
                <option value="9" label= "9"></option>
                <option value="10" label= "10"></option>
                <option value="11" label= "11"></option>
            </datalist>
        </div>
        <svg id="canvas" width="1000" height="800">
        </svg>
        <div id="vcTooltip"></div>
    </div>

<script>

/*-----------------------*/
/* Definition Dimensions */
/*-----------------------*/

var rectWidth = 150
var rectHight = rectWidth/1.618
var firstRow = 10
var secondRow = firstRow+rectHight+60
var thirdRow = secondRow+rectHight+60
var firstCol = 10
var secondCol = firstCol+rectWidth+60
var thirdCol = secondCol+rectWidth+60
var blockWidth = thirdCol+rectWidth-firstCol
var firstRowMid = firstRow+rectHight/2
var secondRowMid =secondRow+rectHight/2
var thirdRowMid =thirdRow+rectHight/2
var firstColMid =firstCol+rectWidth/2
var secondColMid =secondCol+rectWidth/2
var thirdColMid =thirdCol+rectWidth/2
var firstRowEnd = firstRow+rectHight
var secondRowEnd = secondRow+rectHight
var thirdRowEnd = thirdRow+rectHight
var firstColEnd = firstCol+rectWidth
var secondColEnd = secondCol+rectWidth
var thirdColEnd = thirdCol+rectWidth


/*---------------------------*/
/* Definition Line Generator */
/*---------------------------*/

var lineGenerator =d3.line()

/*-------------------*/
/* Definition Colors */
/*-------------------*/

var jade = "#529c9a"
var rubin = "#cd003a"
var kobalt = "#2c4262"
var saphire ="#101a3a"
var gray = "#ccc4c2"
var quarz ="#c69e8e"
var bernstein = "#f0c84a"
var amethyst = "#5e4458"
var granat = "#940a2d"



/*--------------*/
/* Generate SVG */
/*--------------*/

var svg = d3.select("#canvas")
            .append("svg")
            .attr("width", 1000)
            .attr("height", 600)


/*------------*/
/* Rectangles */
/*------------*/

/*
Rectangle Issuer
*/

var Issuer = svg.append("rect")
                .attr("class", "issuer")
                .attr("x", firstCol)
                .attr("y", secondRow)
                .attr("width", rectWidth)
                .attr("height", rectHight)
                .attr("fill", gray)
                .attr("fill-opacity", 0.2)
                .attr("stroke", gray)
                .attr("stroke-width", 3)

var textIssuer = svg.append("text")
                    .text("Ausgabestelle")
                    .attr("class", "textIssuer")
                    .attr("x", firstCol+rectWidth/2)
                    .attr("y", secondRow+rectHight/2)

/*
Rectangle Holder
*/

var Holder = svg.append("rect")
                .attr("class", "Holder")
                .attr("x", secondCol)
                .attr("y", firstRow)
                .attr("width", rectWidth)
                .attr("height", rectHight)
                .attr("fill", gray)
                .attr("fill-opacity", 0.2)
                .attr("stroke", gray)
                .attr("stroke-width", 3)


var textHolder = svg.append("text")
                    .text("Inhaberin")
                    .attr("class", "textHolder")
                    .attr("x", secondCol+rectWidth/2)
                    .attr("y", firstRow+rectHight/2)

/*
Rectangle Blockchain
*/

var Blockchain = svg.append("rect")
                    .attr("class", "blockchain")
                    .attr("x", firstCol)
                    .attr("y", thirdRow)
                    .attr("width", blockWidth)
                    .attr("height", rectHight)
                    .attr("fill", gray)
                    .attr("fill-opacity", 0.2)
                    .attr("stroke", gray)
                    .attr("stroke-width", 0.5)

var textBlockchain = svg.append("text")
                        .text("Blockchain")
                        .attr("class", "textBlockchain")
                        .attr("x", secondCol+rectWidth/2)
                        .attr("y", thirdRow+rectHight/2)
                        .attr("opacity", 0.4)



/*
Rectangle Verifier
*/
var Verifier = svg.append("rect")
                .attr("class", "verifier")
                .attr("x", thirdCol)
                .attr("y", secondRow)
                .attr("width", rectWidth)
                .attr("height", rectHight)
                .attr("fill", gray)
                    .attr("stroke", gray)
                    .attr("stroke-width", 0.5)
                    .attr("fill", gray)
                    .style("fill-opacity", 0.1)

var textVerifier = svg.append("text")
                    .text("Überprüfer:in")
                    .attr("class", "textVerifier")
                    .attr("x", thirdCol+rectWidth/2)
                    .attr("y", secondRow+rectHight/2)
                    .attr("opacity", 0.4)


/*-------------*/
/* Define Text */
/*-------------*/

var textStep0 = ""
var textStep1 = "Die Ausgbaestelle möchte der Inhaberin einen digitalen Nachweis austellen. Dazu wird i) eine direkte und verschlüsselte Verbindung aufgebaut, ii) der digitale Nachweis erstellt und iii) übermittelt. Die nachfolgenden Schritte zeigen diesen Prozess im Detail. Dabei spielen sich die Schritte zumeist sekundenschnell im Hintergrund ab, werden hier aber zum besseren Verständnis aufgedröselt."
var textStep2 = "Für den Verbindungsaufbau übergibt die Ausgabestelle der Inhaberin eine Verbindungseinladung, z.B. in Form eines QR-Codes."
var textStep3 = "Die Inhaberin scannt den QR-Code mit ihrem Handy und nimmt die Verbindungseinladung an. Dann wird im Hintergrund ein Schlüsselpaar generiert, bestehend aus einem privaten (violet) und öffentlichen (gelb) Schlüssel. Dieses Schlüsselpaar ist verbindungsspezifisch." 
var textStep4 = "Eine Kopie des öffentlichen Schlüssel (gelb) wird mit der Nachricht über die Annahme der Verbindungseinladung an die Ausgabestelle übermittelt und in deren elektronischer Brieftasche gespeichert. Der private Schlüssel (violet) bleibt in der elektronischen Brieftasche der Inhaberin."
var textStep5 = "Auch bei der Ausgabestelle wird nun ein Schlüsselpaar für die Verbindung generiert, mit privatem (violet) und öffentlichem (gelb) Schlüssel."
var textStep6 = "Während der private Schlüssel in der elektronischen Brieftasche der Ausgabestelle bleibt, wird eine Kopie des öffentlichen Schlüssels und die Bestätigung des Verbindungsaufbaus an die Inhaberin versandt. Die Kopie des öffentlichen Schlüssels (gelb) kommt in die elektronische Brieftasche der Inhaberin."
var textStep7 = "Nun besteht eine direkte und verschlüsselte Verbindung zwischen Ausgabestelle und Inhaberin, über die digitale Nachweise und Nachrichten ausgetauscht werden können."
var textStep8 = "Um nun einen digitalen Nachweis auszustellen greift die Ausgabestelle auf das spezifische Schema – eine Art leere Formularvorlage für diesen digitalen Nachweis – auf der Blockchain zu."
var textStep9 = "Die Ausgabestelle füllt das Schema aus und signiert es mit dem privaten Schlüssel der Ausgabestelle - nicht zu verwechseln mit den verbindungsspezifischen Schlüsseln aus den vorherigen Schritten. Der digitale Nachweis ist fertig."
var textStep10 = "Die Ausgabestelle übermittelt den digitalen Nachweis über die direkte und verschlüsselte Verbindung an die Inhaberin."
var textStep11 = "Die Inhaberin entschlüsselt die Nachricht mithilfe des verbindungsspezifischen Schlüssels der Ausgabestelle und bewahrt den darin enthaltenen digitalen Nachweis in ihrer elektronischen Brieftasche auf."

var tooltip = d3.select("#vcTooltip")
    .append("tooltip")
    .attr("class", "tooltip")
    .style("opacity",0)


/*------*/
/* Glow */
/*------*/

const defs = svg.append('defs')
const glowDeviation = '1.5'

// Filter for the outside glow
const filter = defs.append('filter').attr('id', 'glow')
filter.append('feGaussianBlur')
    .attr('stdDeviation', glowDeviation)
    .attr('result', 'coloredBlur')
    
const feMerge = filter.append('feMerge')
feMerge.append('feMergeNode').attr('in', 'coloredBlur')
feMerge.append('feMergeNode').attr('in', 'SourceGraphic')





/*-----------*/
/* Schlüssel */
/*-----------*/



// Generierung Schlüssel Holder
    var keyPairHolderP = [[0,30], [10,30], [10,20], [20,20], [20,10], [10,10], [10,0], [0,0]]
    var lineKeyPairHolderP = lineGenerator(keyPairHolderP)
    var pathKeyPairHolderP = svg.append("path").attr("d", lineKeyPairHolderP)
            .attr("fill", amethyst)
            .style("opacity", 0)
            .attr("transform", "translate("+(secondColMid-60)+","+(firstRowMid+10)+")")


    var keyPairHolderO = [[30,30], [30,0], [10,0], [10,10], [20,10], [20,20], [10,20], [10,30]]
    var lineKeyPairHolderO = lineGenerator(keyPairHolderO)
    var pathKeyPairHolderO = svg.append("path").attr("d", lineKeyPairHolderO )
            .attr("fill", bernstein)
            .style("opacity", 0)
            .attr("transform", "translate("+(secondColMid-60)+","+(firstRowMid+10)+")")

// Öffentlicher Schlüssel Holder bei Issuer

    var pathKeyHolderIssuer = svg.append("path").attr("d", lineKeyPairHolderO )
        .attr("fill", bernstein)
        .style("opacity", 0)
        .attr("transform", "translate("+(firstColMid+20)+","+(secondRowMid+10)+")")


// Generierung Schlüssel Holder
    var keyPairIssuerP = [[0,30], [30,30], [30,20], [10,20], [10,10], [0,10]]
    var lineKeyPairIssuerP = lineGenerator(keyPairIssuerP)
    var pathKeyPairIssuerP = svg.append("path").attr("d", lineKeyPairIssuerP)
        .attr("fill", amethyst)
        .style("opacity", 0)
        .attr("transform", "translate("+(firstColMid-60)+","+(secondRowMid+10)+")")


    var keyPairIssuerO = [[0,0], [0,10], [10,10], [10,20], [30,20], [30,0]]
    var lineKeyPairIssuerO = lineGenerator(keyPairIssuerO)
    var pathKeyPairIssuerO = svg.append("path").attr("d", lineKeyPairIssuerO )
        .attr("fill", bernstein)
        .style("opacity", 0)
        .attr("transform", "translate("+(firstColMid-60)+","+(secondRowMid+10)+")")

    
// Öffentlicher Schlüssel Issuer bei Holder

var pathKeyIssuerHolder = svg.append("path").attr("d", lineKeyPairIssuerO )
        .attr("fill", bernstein)
        .style("opacity", 0)
        .attr("transform", "translate("+(secondColMid+20)+","+(firstRowMid+10)+")")


/*------------*/
/* Verbindung */
/*------------*/

var conHolderIssuer = [[firstColMid, secondRow-2], [firstColMid,firstRowMid], [secondCol-2, firstRowMid]]
var lineConHolderIssuer = lineGenerator(conHolderIssuer)

var pathConHolderIssuer =  svg.append('path')
        .attr("class", "pathStep7")
        .attr('d', lineConHolderIssuer)
        .attr("stroke", quarz)
        .attr("stroke-width", 20)
        .attr("fill", "none")
        .style("opacity", 0)




/*-----------------*/
/* Update function */
/*-----------------*/

tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep0)
        .style("left","0px")
        .style("top", "0px")

function updateStep() {

var selectedStep = document.getElementById("vcProcessSlider").value
console.log(selectedStep)

    if (selectedStep == 0) {

        pathKeyPairHolderO
            .style("opacity", 0)

        pathKeyPairHolderP
            .style("opacity", 0)

        pathKeyHolderIssuer
            .style("opacity", 0)

        pathKeyPairIssuerO
            .style("opacity", 0)

        pathKeyPairIssuerP
            .style("opacity", 0)

        pathKeyIssuerHolder
            .style("opacity", 0)
            
        pathConHolderIssuer
            .style("opacity", 0)

        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep0)
        .style("left","0px")
        .style("top", "0px")

    }

    if (selectedStep == 1) {

        pathKeyPairHolderO
            .style("opacity", 0)

        pathKeyPairHolderP
            .style("opacity", 0)

        pathKeyHolderIssuer
            .style("opacity", 0)

        pathKeyPairIssuerO
            .style("opacity", 0)

        pathKeyPairIssuerP
            .style("opacity", 0)

        pathKeyIssuerHolder
            .style("opacity", 0)
            
        pathConHolderIssuer
            .style("opacity", 0)

        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)


        tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep1)
        .style("left","0px")
        .style("top", "0px")
    }

    if (selectedStep == 2) {

        pathKeyPairHolderO
            .style("opacity", 0)

        pathKeyPairHolderP
            .style("opacity", 0)

        pathKeyHolderIssuer
            .style("opacity", 0)

        pathKeyPairIssuerO
            .style("opacity", 0)

        pathKeyPairIssuerP
            .style("opacity", 0)

        pathKeyIssuerHolder
            .style("opacity", 0)

        pathConHolderIssuer
            .style("opacity", 0)

        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        svg.selectAll(".pathStep6")
            .remove()
        
        tooltip
            .attr("class", "tooltip")
            .style("opacity", 1)
            .text(textStep2)
            .style("left","0px")
            .style("top", "0px")


        var points = [[firstColMid, secondRow-2], [firstColMid,firstRowMid], [secondCol-2, firstRowMid]]
        var pathOfLine = lineGenerator(points)

        var pathData =  svg.append('path')
            .attr('d', pathOfLine)
            .attr("stroke", jade)
            .attr("opacity", 0.8)  
            .attr("stroke-width", 5)
            .attr("fill", "none")
            .style('filter', 'url(#glow)')
      

        var totalLength = pathData.node().getTotalLength();

        pathData
            .attr("stroke-dasharray", totalLength + " " + totalLength)
            .attr("stroke-dashoffset", totalLength)
            .transition()
                .duration(2000)
                .ease(d3.easeLinear)
                .attr("stroke-dashoffset", 0)
            .transition()
                .delay(2000)
                .duration(2000)
                .ease(d3.easeLinear)
                .attr("stroke-dashoffset", -totalLength)
    
    }

    if (selectedStep == 3) {

        pathKeyPairHolderO
            .style("opacity", 0)

        pathKeyPairHolderP
            .style("opacity", 0)

        pathKeyHolderIssuer
            .style("opacity", 0)
        
        pathKeyPairIssuerO
            .style("opacity", 0)

        pathKeyPairIssuerP
            .style("opacity", 0)

        pathKeyIssuerHolder
            .style("opacity", 0)

        pathConHolderIssuer
            .style("opacity", 0)


        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep3)
        .style("left","0px")
        .style("top", "0px")


        Holder
            .transition()
            .attr("stroke", jade)
            .attr("stroke-width", 6)
            .duration(1000)
            .transition()
            .delay(5000)
            .duration(1000)
            .transition()
            .attr("stroke", gray)
            .attr('stroke-width', 3)

        pathKeyPairHolderO
            .transition()
            .style("opacity", 1)
            .delay(1000)
            .duration(5000)

        pathKeyPairHolderP
            .transition()
            .style("opacity", 1)
            .delay(1000)
            .duration(5000)     
    
    }

    if (selectedStep == 4) {
        
        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 0)

        pathKeyPairIssuerP
            .style("opacity", 0)

        pathKeyIssuerHolder
            .style("opacity", 0)

        pathConHolderIssuer
            .style("opacity", 0)



        
        tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep4)
        .style("left","0px")
        .style("top", "0px")


        var points = [[secondCol-2, firstRowMid], [firstColMid,firstRowMid],[firstColMid, secondRow-2] ]
        var pathOfLine = lineGenerator(points)

        var pathData =  svg.append('path')
        .attr('d', pathOfLine)
        .attr("stroke", jade)
        .attr("opacity", 0.8)  
        .attr("stroke-width", 5)
        .attr("fill", "none")
        .style('filter', 'url(#glow)')
      

        var totalLength = pathData.node().getTotalLength();

        pathData
        .attr("stroke-dasharray", totalLength + " " + totalLength)
        .attr("stroke-dashoffset", totalLength)
        .transition()
            .duration(2000)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", 0)
        .transition()
            .delay(2000)
            .duration(2000)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", -totalLength)

        pathKeyHolderIssuer
        .transition()
            .style("opacity", 1)
            .delay(2000)
            .duration(2000)

    
    }

    if (selectedStep == 5) {

        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)
    
        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyIssuerHolder
            .style("opacity", 0)

        pathConHolderIssuer
            .style("opacity", 0)
        
        tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep5)
        .style("left","0px")
        .style("top", "0px")

        Issuer
        .transition()
        .attr("stroke-width", 6)
        .attr("stroke", jade)
        .duration(1000)
        .transition()
        .delay(5000)
        .duration(1000)
        .transition()
        .attr('stroke-width', 3)
        .attr("stroke", gray)

        pathKeyPairIssuerO
            .transition()
            .style("opacity", 1)
            .delay(500)
            .duration(5000)

        pathKeyPairIssuerP
            .transition()
            .style("opacity", 1)
            .delay(500)
            .duration(5000)    
        
    }

    if (selectedStep == 6) {
      

        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)    

        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 1)

        pathKeyPairIssuerP
            .style("opacity", 1)

        pathConHolderIssuer
            .style("opacity", 0)


       
        tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep6)
        .style("left","0px")
        .style("top", "0px")

        var points = [[firstColMid, secondRow-2], [firstColMid,firstRowMid], [secondCol-2, firstRowMid]]
        var pathOfLine = lineGenerator(points)

        var pathData =  svg.append('path')
        .attr('d', pathOfLine)
        .attr("stroke", jade)
        .attr("opacity", 0.8)  
        .attr("stroke-width", 5)
        .attr("fill", "none")
        .style('filter', 'url(#glow)')      

        var totalLength = pathData.node().getTotalLength();

        pathData
        .attr("stroke-dasharray", totalLength + " " + totalLength)
        .attr("stroke-dashoffset", totalLength)
        .transition()
            .duration(2000)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", 0)
        .transition()
            .delay(2000)
            .duration(2000)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", -totalLength)


        pathKeyIssuerHolder
            .transition()
            .style("opacity", 1)
            .delay(2000)
            .duration(2000)
        

    
    }

    if (selectedStep == 7) {

        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)

        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)

        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 1)

        pathKeyPairIssuerP
            .style("opacity", 1)

        pathKeyIssuerHolder
            .style("opacity", 1)

        pathConHolderIssuer
            .style("opacity", 0)


        tooltip
            .attr("class", "tooltip")
            .style("opacity", 1)
            .text(textStep7)
            .style("left","0px")
            .style("top", "0px")


        pathConHolderIssuer
            .transition()
            .style("opacity", 0.3)
            .delay(1000)
            .duration(2000)
    
    }

    if (selectedStep == 8) {


        Blockchain
            .attr("stroke-width", 0.5)

        textBlockchain
            .attr("opacity", 0.4)
    
        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)

        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 1)

        pathKeyPairIssuerP
            .style("opacity", 1)

        pathKeyIssuerHolder
            .style("opacity", 1)

        pathConHolderIssuer
            .style("opacity", 0.3)

        tooltip
            .attr("class", "tooltip")
            .style("opacity", 1)
            .text(textStep8)
            .style("left","0px")
            .style("top", "0px")

        var points = [[firstColEnd+2, secondRowMid], [secondColMid,secondRowMid], [secondColMid, thirdRow-2]]
        var pathOfLine = lineGenerator(points)

        var pathData =  svg.append('path')
            .attr('d', pathOfLine)
            .attr("stroke", jade)
            .attr("opacity", 0.8)  
            .attr("stroke-width", 5)
            .attr("fill", "none")
            .style('filter', 'url(#glow)')


        var totalLength = pathData.node().getTotalLength();

        pathData
            .attr("stroke-dasharray", totalLength + " " + totalLength)
            .attr("stroke-dashoffset", totalLength)
            .transition()
                .duration(2000)
                .ease(d3.easeLinear)
                .attr("stroke-dashoffset", 0)
            .transition()
                .delay(2000)
                .duration(2000)
                .ease(d3.easeLinear)
                .attr("stroke-dashoffset", totalLength)
        

        Blockchain
            .transition()
            .delay(1000)
            .duration(1000)
            .attr("stroke-width", 3)


        textBlockchain
            .transition()
            .duration(1000)
            .attr("opacity", 1)




    }
    else if (selectedStep == 9)  {

        Blockchain
            .attr("stroke-width", 3)

        textBlockchain
            .attr("opacity", 1)
    
        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)

        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 1)

        pathKeyPairIssuerP
            .style("opacity", 1)

        pathKeyIssuerHolder
            .style("opacity", 1)

        pathConHolderIssuer
            .style("opacity", 0.3)
        

    Issuer
        .transition()
        .attr("stroke", jade)
        .attr("stroke-width", 6)
        .duration(1000)
        .transition()
        .delay(5000)
        .duration(1000)
        .transition()
        .attr("stroke", gray)
        .attr('stroke-width', 3)
    
    tooltip
        .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep9)
        .style("left","0px")
        .style("top", "0px")

    }
    else if (selectedStep == 10)  {

        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)

        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 1)

        pathKeyPairIssuerP
            .style("opacity", 1)

        pathKeyIssuerHolder
            .style("opacity", 1)

        pathConHolderIssuer
            .style("opacity", 0.3)

    tooltip
    .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep10)
        .style("left","0px")
        .style("top", "0px")

    var gen = d3.line()
    var points = [[firstColMid, secondRow-2], [firstColMid,firstRowMid], [secondCol-2, firstRowMid]]
    var pathOfLine = gen(points)

    var pathData =  svg.append('path')
        .attr('d', pathOfLine)
        .attr("stroke", jade)
        .attr("opacity", 0.8)  
        .attr("stroke-width", 5)
        .attr("fill", "none")
        .style('filter', 'url(#glow)')
    

    var totalLength = pathData.node().getTotalLength();

    pathData
        .attr("stroke-dasharray", totalLength + " " + totalLength)
        .attr("stroke-dashoffset", totalLength)
        .transition()
            .duration(2000)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", 0)
        .transition()
            .delay(2000)
            .duration(2000)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", -totalLength)


    }
    else if (selectedStep == 11)  {

        pathKeyPairHolderO
            .style("opacity", 1)

        pathKeyPairHolderP
            .style("opacity", 1)

        pathKeyHolderIssuer
            .style("opacity", 1)

        pathKeyPairIssuerO
            .style("opacity", 1)

        pathKeyPairIssuerP
            .style("opacity", 1)

        pathKeyIssuerHolder
            .style("opacity", 1)

        pathConHolderIssuer
            .style("opacity", 0.3)

    Holder
        .transition()
        .attr("stroke", jade)
        .attr("stroke-width", 6)
        .duration(1000)
        .transition()
        .delay(5000)
        .duration(1000)
        .transition()
        .attr("stroke", gray)
        .attr('stroke-width', 3)
    
    tooltip
    .attr("class", "tooltip")
        .style("opacity", 1)
        .text(textStep11)
        .style("left","0px")
        .style("top", "0px")   


    pathKeyIssuerHolder
        .attr("transform", "translate("+(secondColMid+20)+","+(firstRowMid+10)+")")

    
    
    }
    
}

selectedStep = 0
document.getElementById("vcProcessSlider").value = 0;

</script>

</body>
</html>
